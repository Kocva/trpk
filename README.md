Класс ProfileController
Обзор
Класс ProfileController расширяет базовый класс Controller и отвечает за обработку действий, связанных с профилем пользователя. Этот контроллер включает промежуточное ПО (middleware), чтобы гарантировать, что только аутентифицированные пользователи могут получить доступ к его методам. Основные функции, предоставляемые этим контроллером, включают отображение профиля пользователя и обновление информации профиля пользователя.

Конструктор
__construct()
Метод-конструктор инициализирует контроллер и применяет промежуточное ПО auth, чтобы гарантировать, что все действия в этом контроллере требуют аутентификации пользователя.

Методы
showProfile(Request $request)
Этот метод отвечает за отображение профиля пользователя. Он получает ID текущего аутентифицированного пользователя, извлекает связанную информацию о пользователе из модели UserInfo и возвращает представление профиля. Если информация о пользователе не найдена, он создает новую запись UserInfo с значениями по умолчанию и предоставленными данными запроса, а затем возвращает представление профиля.

Параметры
Request $request: Объект запроса, содержащий потенциальные входные данные для создания нового профиля пользователя.
Возвращает
Illuminate\View\View: Представление профиля с информацией о пользователе.

"updateProfile(Request $request)"
Этот метод обновляет информацию профиля пользователя. Сначала он обновляет или создает ежедневную запись о весе пользователя в таблице weightstat. Затем он обновляет или создает информацию профиля пользователя в таблице UserInfo с данными из запроса. После обновления профиля он перенаправляет пользователя на страницу профиля с сообщением об успешном обновлении.

Параметры
Request $request: Объект запроса, содержащий входные данные для обновления профиля пользователя.
Возвращает
Illuminate\Http\RedirectResponse: Ответ с перенаправлением на страницу профиля пользователя с сообщением об успешном обновлении.

Модели
UserInfo
Представляет информацию о профиле пользователя, включая такие поля, как вес, рост, пол, возраст и уровень активности.

weightstat
Представляет ежедневную статистику веса пользователя, позволяя отслеживать изменения веса с течением времени.

Зависимости
Illuminate\Http\Request: Обрабатывает HTTP-запросы.
Auth: Предоставляет поддержку аутентификации.
UserInfo: Модель Eloquent для информации о профиле пользователя.
weightstat: Модель Eloquent для статистики веса пользователя.
Carbon: Обрабатывает операции с датой и временем.
Промежуточное ПО
auth: Гарантирует, что только аутентифицированные пользователи могут получить доступ к методам этого контроллера.



Класс FoodListController расширяет базовый класс Controller и отвечает за обработку действий, связанных со списком продуктов питания. Этот контроллер включает промежуточное ПО (middleware), чтобы гарантировать, что только аутентифицированные пользователи могут получить доступ к его методам. Основные функции, предоставляемые этим контроллером, включают отображение списка продуктов, поиск по списку продуктов и добавление продуктов в таблицу потребленных продуктов.

__construct()
Метод-конструктор инициализирует контроллер и применяет промежуточное ПО auth, чтобы гарантировать, что все действия в этом контроллере требуют аутентификации пользователя.

Методы
index()
Этот метод отвечает за отображение списка продуктов. Он получает первые 10 записей из таблицы FoodList и возвращает представление с этим списком продуктов.

Возвращает
Illuminate\View\View: Представление с отображением списка продуктов.

search(Request $request)
Этот метод отвечает за поиск продуктов в списке. Он получает поисковый запрос из объекта Request и выполняет поиск по таблице FoodList по имени продукта. Если запрос не задан, возвращаются первые 10 записей из таблицы.

Параметры
Request $request: Объект запроса, содержащий поисковый запрос.
Возвращает
Illuminate\View\View: Представление с результатами поиска или списком продуктов.

addFood(Request $request, $food)
Этот метод отвечает за добавление выбранного продукта в таблицу потребленных продуктов (Eated). Он получает информацию о продукте и количестве граммов из объекта Request, рассчитывает пищевые данные (белки, жиры, углеводы, калории) и сохраняет их в таблице Eated.

Параметры
Request $request: Объект запроса, содержащий данные о количестве граммов продукта.
$food: Объект продукта или его ID, который нужно добавить.
Возвращает
Illuminate\Http\RedirectResponse: Ответ с перенаправлением обратно на предыдущую страницу с сообщением об успешном добавлении продукта.

Модели
FoodList
Представляет список продуктов питания, включая такие поля, как имя продукта, белки, жиры, углеводы и калории.

Eated
Представляет таблицу потребленных продуктов, где хранятся данные о потребленных пользователем продуктах, включая их пищевые данные.

Зависимости
Illuminate\Support\Facades\Auth: Предоставляет поддержку аутентификации.
Illuminate\Http\Request: Обрабатывает HTTP-запросы.
App\Models\FoodList: Модель Eloquent для списка продуктов питания.
App\Models\Eated: Модель Eloquent для таблицы потребленных продуктов.
Промежуточное ПО
auth: Гарантирует, что только аутентифицированные пользователи могут получить доступ к методам этого контроллера.



Класс HomeController расширяет базовый класс Controller и отвечает за отображение информации о прогрессе пользователя в потреблении калорий, белков, жиров и углеводов. Этот контроллер включает промежуточное ПО (middleware), чтобы гарантировать, что только аутентифицированные пользователи могут получить доступ к его методам.

__construct()
Метод-конструктор инициализирует контроллер и применяет промежуточное ПО auth, чтобы гарантировать, что все действия в этом контроллере требуют аутентификации пользователя.

Методы
showProgress()
Этот метод отвечает за отображение прогресса пользователя в потреблении калорий, белков, жиров и углеводов. Он рассчитывает максимальное количество калорий и макронутриентов, которые пользователь может потребить в зависимости от его активности, пола, веса, роста и возраста. Также он подсчитывает фактическое количество потребленных калорий и макронутриентов за текущий день.

Возвращает
Illuminate\View\View: Представление с данными о прогрессе пользователя.

index()
Этот метод отображает главную страницу приложения.

Возвращает
Illuminate\Contracts\Support\Renderable: Представление главной страницы.

Модели
UserInfo
Представляет информацию о профиле пользователя, включая такие поля, как вес, рост, пол, возраст и уровень активности.

Eated
Представляет таблицу потребленных продуктов, где хранятся данные о потребленных пользователем продуктах, включая их пищевые данные (калории, белки, жиры, углеводы).

Зависимости
Illuminate\Support\Facades\Auth: Предоставляет поддержку аутентификации.
Illuminate\Http\Request: Обрабатывает HTTP-запросы.
App\Models\UserInfo: Модель Eloquent для информации о профиле пользователя.
App\Models\Eated: Модель Eloquent для таблицы потребленных продуктов.
Carbon\Carbon: Обрабатывает операции с датой и временем.
Промежуточное ПО
auth: Гарантирует, что только аутентифицированные пользователи могут получить доступ к методам этого контроллера.